# 分析应用
前提条件：默认普通用户已通过管理员用户获取分析应用的所有权限，包括数据应用、数据模块、算法定制的查看及创建权限。
说明：创建权限包含新建、编辑、删除、运行和复制的权限。
## 数据应用
前提条件：普通用户已具备数据模块的查看和创建权限。
### 新建数据应用
用户可以根据自己的需求新建数据应用。新建数据应用需完成以下步骤：

1.单击页面左侧导航栏“数据应用”，系统跳转到“数据应用”界面。

2.单击页面右上角的“新建”按钮，弹出“新建数据应用”窗口。用户根据需求填写如下配置项。
![](/user_guide/fig/fig_03.png)
    
| 配置项 | 说明 |
| :--- | :--- | 
| 名称 | 数据应用的名称。 |
| 描述 | 对新建数据应用的简要描述。 |
| 私有（可选） | 勾选“私有”表示新建的数据应用为私有属性，只有创建者、管理员用户或者被赋予数据应用查看和“创建”权限的用户才可以查看。不勾选“私有”表示该数据应用为公有属性，任何用户都具备查看的权限。 |

3.填写完成后，单击“确定”，系统跳转到数据应用界面，单击 “数据应用缩略图”>“打开工作流”，进入工作流编辑界面。
工作流编辑界面分为模块区、画布区、小地图等。 
![](/user_guide/fig/fig_04.png)
    
* 模块区：为数据模块库和分析模块库，用户可根据需求拖拽使用。系统内置部分数据模块和分析模块，用户也可以根据自己的需求新建数据模块和分析模块。参见《数据模块》和《分析模块》。
* 画布区：为工作流组建区。
* 小地图：界面右上方小地图区域可呈现整个工作流，拖动灰色方块可定位工作流具体位置。

4.从左侧数据模块库中拖拽数据模块和分析模块到工作流画布中。
将鼠标置于数据模块上可弹出加号，单击加号，系统自动弹出分析模块下拉框，下拉框中模块会自动匹配上级模块的输出类型，便于用户选取。同时，平台支持直接从左侧模块库中拖拽模块至工作区域，需确保模块输入类型与上级模块的输出类型相匹配。

5.按住鼠标左键将模块的输出和下级模块的输入相连接，连线成功后表明模块之间通过数据耦合的方式连接在一起，形成分析工作流。
    - 将鼠标置于模块右上方区域可弹出该模块当前的版本号。
    - 单击画布右上方![](/user_guide/icon/remark.png)按钮，可对模块进行备注，方便他人理解。同时，单击![](/user_guide/icon/hide.png)可对备注进行隐藏或者可见。

6.新建工作流完成后，单击页面右上方“保存”按钮，对该工作流进行保存。

7.版本控制。单击保存后，系统自动生成版本号，默认为0.0版本，不支持自定义版本信息；编辑数据应用工作流时，只有进行添加或者删除模块操作时，单击“保存”后，系统自动升级版本，梯度为+0.1。

8.创建者可对该数据应用工作流进行权限设置。单击“更多”>“权限设置”，弹出“修改权限”对话框。用户可通过勾选用户或用户分组及权限完成权限设置。
    ![](/user_guide/fig/fig_05.png)
    如上图表示用户demo@TEST.COM及算法分析师组对该数据应用只具有读取的权限。

9.权限设置完成后，运行数据应用。在工作流页面单击右上方“运行”按钮，弹出“应用运行配置”对话框，用户根据需求填写相关信息。
    ![](/user_guide/fig/fig_06.png)
    <table>
   <tr>
      <td>配置项</td>
      <td colspan="2">说明</td>
   </tr>
   <tr>
      <td>任务名称</td>
      <td colspan="2">数据应用工作流运行后的任务名称。</td>
   </tr>
   <tr>
      <td>描述</td>
      <td colspan="2">对该任务的简要描述。</td>
   </tr>
   <tr>
      <td>运行模式</td>
      <td>无</td>
      <td>N/A</td>
   </tr>
   <tr>
      <td></td>
      <td>稍后运行：指定一个相对时间稍后运行。</td>
      <td>开始时间：开始运行数据应用的时间。</td>
   </tr>
   <tr>
      <td></td>
      <td>定期运行：指定一个时间间隔周期运行。</td>
      <td><ul>
  <li>开始时间：第一次开始运行数据应用的时间。</li>
  <li>定期模式：周期运行的运行间隔。</li>
  <li>过期时间：定期运行结束时间。</li>
   <li>执行方式<ul>
  <li>顺序执行：定时任务到期时必须等待之前的任务完成，才能运行新任务</li>
  <li>并行执行：定时任务到期就会运行一个新的任务，不管之前的任务是否完成</li>
</ul></li>
</ul></td>
   </tr>
</table>
    
10.填写完成后，单击“运行”，系统跳转到“任务列表”界面。
![](/user_guide/fig/fig_07.png)

### 查看数据应用
单击“服务”>“分析应用”，系统跳转到分析应用界面，系统默认为数据应用界面，展示当前用户权限下的“全部”数据应用缩略图，包括数据应用名称和描述信息。单击页面右上方“自己”按钮，可查看用户自己创建的数据应用缩略图。
![](/user_guide/fig/fig_08.png)

鼠标在某数据应用上停留片刻，会出现数据应用相关信息与操作，包括运行次数、最后一次修改时间、创建人信息；同时支持对该数据应用进行复制、运行和删除的操作按钮。

### 复制数据应用
用户可以复制已有的数据应用以便使用该数据应用的业务实现及配置。复制数据应用需完成以下步骤：

1.将鼠标停留在某数据应用缩略图片刻，单击“复制”，弹出“复制数据应用”对话框。
![](/user_guide/fig/fig_09.png)

| 配置项 | 说明 |
| :--- | :--- |
| 数据应用名称 | 复制后的数据应用名称。 |
| 描述 | 对复制后的数据应用的简要描述。 |
| 私有（可选） | 勾选“私有”表示新建的数据应用为私有属性，只有创建者、管理员用户或者被赋予数据应用查看和“创建”权限的用户才可以查看。 |

2.填写配置项。

3.单击“复制”，系统跳转到数据应用界面。

### 编辑数据应用
前提条件：当且仅当创建者对该数据应用进行了权限设置，其他用户才可能对该数据应用具备编辑权限。
#### 查看详情
1.单击页面左侧导航栏“数据应用”，系统跳转到“数据应用”界面。

2.单击需要编辑的数据应用缩略图，进入数据应用详情界面，用户可查看数据应
    ![](/user_guide/fig/fig_10.png)

* 用户可查看该工作流的修改记录，包括项目更新记录、公私有属性记录；
* 用户可对该工作流进行评价并查看其他用户的评价；
* 用户可以查看该工作流的名称、描述、更新时间、创建人和运行次数。
* 用户可以查看数据模块和分析模块名称及数量；
* 用户可以添加对数据应用的详细描述；支持markdown语法。

#### 编辑工作流
用户可以编辑当前数据应用，单击工作流详情页面右上方“打开工作流”，系统跳转到工作流编辑页面。

**编辑工作流**

用户可对该工作流进行编辑，用户可对模块进行调整，包括增加模块、删除模块、编辑模块等；
![](/user_guide/fig/fig_11.png)    

**编辑数据模块**

单击数据模块，弹出编辑模块对话框，可添加和修改模块别名。
![](/user_guide/fig/fig_12.png)

**修改数据模块参数**

单击分析模块，弹出编辑模块对话框，可添加和修改模块别名，同时支持查看资源配置情况，包括CPUS、MEM。
![](/user_guide/fig/fig_13.png)

**编辑描述和共享性**

单击“更多”>“编辑应用”，可对模块的描述和共享性进行修改。
![](/user_guide/fig/fig_14.png)

## 数据模块
前提条件：普通用户已具备数据模块的读取权限。
### 新建数据模块
用户可以根据自己的需求新建数据模块。新建数据模块需完成以下步骤：
1. 单击页面左侧导航栏“数据模块”，系统跳转到“数据模块”界面。
2. 单击页面右上角的“新建”按钮，弹出“创建数据模块”窗口。用户根据需求填写如下配置项。
    ![](/user_guide/fig/fig_15.png)
  <table>
   <tr>
      <td >配置项</td>
      <td colspan="2" >说明</td>
   </tr>
   <tr>
      <td rowspan="3">选择类型</td>
      <td>Localfile</td>
      <td>添加数据文件：选择本地数据文件</td>
   </tr>
   <tr>
      <td>HDFS</td>
      <td><p>HDFS:格式类型</p><p>hdfs://+地址</p></td>
   </tr>
   <tr>
      <td>Hive</td>
      <td><p>HIVE:格式类型</p><p>host=?,port=?,database=?,table=?</p></td>
   </tr>
   <tr>
      <td>名称</td>
      <td colspan="2">数据模块的名称。</td>
   </tr>
   <tr>
      <td>描述（可选）</td>
      <td colspan="2" >对数据模块的简要描述。</td>
   </tr>
   <tr>
      <td>标签（可选）</td>
      <td colspan="2">对数据模块按照标签分类。</td>
   </tr>
   <tr>
      <td>私有（可选）</td>
      <td colspan="2">勾选“私有”表示新建的数据模块为私有属性，只有创建者、管理员用户或者被赋予数据模块查看和“创建”权限的用户才可以查看和编辑。</td>
   </tr>
</table>










